from PIL import Image
from time import time
import numpy as np
import ast, sys
import json
import re

decompress = str.maketrans(
    'NOPQRSTfVWXYZonpqrstuvxwyzABEDCFGHIJKLMac1234567890dmUghijkleb.,*/|-_',
    'ABCDEFGHIJKLMabcdefghijklmNOPQRSTUVWXYZnopqrstuvwxyz1234567890)(,][_-')

timer = time()
try:
    f = open(sys.argv[1], "r+", encoding="utf-8")
except IndexError:
    exit("USAGE: wimmelbildviewer <file>")
print("Open File: "+str(time()-timer))

timer = time()
image = f.read()
image = re.sub("ğŸ““",".ğŸŒŒUiUğŸ’«mU*elğŸ’«ğŸŒ ",image)
image = re.sub("ğŸ“",".ğŸŒŒUğŸŒ ğŸ’«ğŸŒ ğŸ’«ğŸŒ ğŸ’«ğŸŒ ",image)
image = re.sub("ğŸ¨",".ğŸŒŒğŸŒŸeğŸ’«heğŸ’«heğŸ’«ğŸŒ ",image)
image = re.sub("ğŸ–ï¸", ".ğŸŒŒUihğŸ’«ihğŸ’«ihğŸ’«",image)
image = re.sub("â­","ğŸ§¤ğŸ§¤ğŸ§¤ğŸ§¤ğŸ§¤ğŸ§¤",image)
image = re.sub("ğŸ§¤","ğŸŒ¨ï¸ğŸªğŸŒ¨ï¸ğŸªğŸŒ¨ï¸ğŸª",image)
image = re.sub("ğŸŒ¨ï¸","ğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒ",image)
image = re.sub("ğŸŒ¦ï¸","ğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸªğŸŒŒğŸª",image)
image = re.sub("ğŸ§£","/*|,",image)
image = re.sub("ğŸŒ•","ğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸªğŸª",image)
image = re.sub("ğŸª","ğŸŒŸlğŸ’«ğŸ§¶ğŸ’«ğŸ§¶ğŸ’«ğŸŒ .",image)
image = re.sub("âœ¨","Ui,",image)
image = re.sub("ğŸŒŒ","*,",image)
image = re.sub("ğŸ§¶","hl",image)
image = re.sub("ğŸŒ ","ii",image)
image = re.sub("ğŸŒŸ","Uh",image)
image = re.sub("ğŸ’«","*U",image)
image = re.sub('WIMMELBILDFILE__OWO','',image)
image = re.sub('OwO__WIMMELBILDFILE','',image) 
print("Replace: "+str(time()-timer))
timer = time()
image = image.translate(decompress)
print("Decompress: "+str(time()-timer))
timer = time()
image = json.loads(image)
print("Evaluate: "+str(time()-timer))
timer = time()
image = np.asarray(image)
print("Load: "+str(time()-timer))
timer = time()
im = Image.fromarray(image.astype(np.uint8))
print("Convert: "+str(time()-timer))
timer = time()
im.show()
print("View: "+str(time()-timer))
